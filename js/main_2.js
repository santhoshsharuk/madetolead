!function(){var e,t,r=new XMLHttpRequest,a=new XMLHttpRequest,n=[],i=!1,o=!1;function s(e,t,r){t||(t="all"),document.querySelector(".kkra-global").classList.add("paginating"),m();var n=new FormData;n.append("action","kkra_ajax_pagination"),n.append("per_page",r),n.append("filter",JSON.stringify(i)),n.append("term",t),n.append("page",e),a.open("POST",_kkraajaxurl),a.send(n)}function l(e){document.documentElement.classList.add("kkra-smooth-scroll"),e.scrollIntoView(),setTimeout((function(){document.documentElement.classList.remove("kkra-smooth-scroll")}),500)}function c(e){return!!e.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)}function u(e){return-1==e.indexOf("youtube")&&-1==e.indexOf("vimeo")&&-1==e.indexOf("wistia")?"Video must be uploaded to YouTube, Vimeo or Wistia.":e.indexOf("wistia")>-1&&-1==e.indexOf("fast.wistia.com/embed/iframe")&&'Wistia URL must be in the format "http://fast.wistia.com/embed/iframe/VIDEOID"'}function d(t,r){e=!1;var a=document.createElement("div");a.classList.add("field-error"),a.textContent=r,t.insertAdjacentElement("afterend",a),t.classList.add("errored-field")}function m(){document.querySelectorAll(".kkra-modal--review").forEach((function(e,t){e.remove()}))}function f(e){var t=e.querySelectorAll("[data-kkra-trigger]"),r=e.querySelectorAll(".kkra-modal");t.forEach((function(e,t){e.addEventListener("click",(function(t){t.preventDefault();var r=e.getAttribute("data-kkra-trigger"),a=document.querySelector("#modal-"+r),n=a.querySelector("iframe");if(a.classList.toggle("active"),document.body.classList.toggle("kkra-modal-active"),n&&a.classList.contains("active")){var i=n.getAttribute("data-src");"about:blank"==n.getAttribute("src")&&n.setAttribute("src",i)}}))})),r.forEach((function(e,t){e.addEventListener("click",(function(t){(t.target.classList.contains("kkra-modal")||t.target.classList.contains("kkra-close"))&&(e.classList.remove("active"),document.body.classList.remove("kkra-modal-active"))})),e.classList.remove("hide")}))}function p(){var e=document.querySelectorAll('[href*="#rm"]'),t=document.querySelectorAll('[href*="#rl"]');e.length&&(e.forEach((function(e,t){e.addEventListener("click",(function(){var e=this.getAttribute("data-pid");document.getElementById("sub-"+e).classList.remove("active"),document.getElementById("full-"+e).classList.add("active")}))})),t.forEach((function(e,t){e.addEventListener("click",(function(){var e=this.getAttribute("data-pid");document.getElementById("sub-"+e).classList.add("active"),document.getElementById("full-"+e).classList.remove("active")}))})))}window.addEventListener("DOMContentLoaded",(function(){f(document),function(){var e=document.querySelectorAll("[data-filter-type]"),t=document.querySelectorAll(".kkra-filters__title"),r=15,a=document.querySelector("[data-perpage]");a&&(r=a.getAttribute("data-perpage"));e.length&&(i={type:[],score:[],niche:[],region:[]},e.forEach((function(e,t){e.addEventListener("click",(function(){m();var t=e.getAttribute("data-filter-type"),a=e.getAttribute("data-filter-val");e.classList.toggle("active"),e.classList.contains("active")?i[t].push(a):i[t].splice(i[t].indexOf(a),1),s(1,"all",r)}))})));t.length&&t.forEach((function(e,t){e.addEventListener("click",(function(){!function(e){e.parentNode.classList.toggle("slide-down"),e.parentNode.classList.contains("slide-down")?e.style.height=e.scrollHeight+"px":e.style.height=0}(e.parentNode.querySelector(".kkra-filters__collapse"))}))}))}(),function(){var e=document.querySelectorAll(".kkra-starinput"),t="",r=0,a=0,n=0,i=0;function o(e){e.parentNode.classList.remove("kkra-stars-1"),e.parentNode.classList.remove("kkra-stars-2"),e.parentNode.classList.remove("kkra-stars-3"),e.parentNode.classList.remove("kkra-stars-4"),e.parentNode.classList.remove("kkra-stars-5")}e.forEach((function(e,s){i=e.getBoundingClientRect().width,t=e.querySelector(".kkra-stars__filled"),e.addEventListener("click",(function(s){switch(o(e),r=0,a=s.layerX,n=a/i*100,!0){case n<=20:r=1;break;case n<=40:r=2;break;case n<=60:r=3;break;case n<=80:r=4;break;case n<=100:r=5}t.style.width=20*r+"%",e.parentNode.parentNode.querySelector('[name="kkra_review_score"]').value=r}))}))}(),document.querySelectorAll(".kkra-form:not([data-dontvalidate])").forEach((function(a,n){a.addEventListener("submit",(function(n){if(n.preventDefault(),o)return!1;if(a.querySelector('[type="submit"]').textContent="Submitting...",function(r){return function(r){e=!0,document.querySelectorAll(".field-error").forEach((function(e,t){e.remove()})),document.querySelectorAll(".errored-field").forEach((function(e,t){e.classList.remove("errored-field")}));for(var a=0;a<r.elements.length;a++)if(void 0!==(t=r.elements[a]).type){if("kkra_review_score"==t.name&&(""==t.value||t.value<=0)&&d(t,"This field is required!"),"kkra_review_video"==t.name&&(t.attributes.required||""!==t.value)){var n=u(t.value);n&&d(t,n)}"hidden"!=t.type&&"submit"!=t.type&&(t.attributes.required&&""==t.value?d(t,"This field is required!"):t.attributes.required&&"SELECT"==t.nodeName?null!=t[t.selectedIndex].getAttribute("value")&&""!=t[t.selectedIndex].getAttribute("value")||d(t,"This field is required!"):t.attributes.required&&"email"==t.type?c(t)||d(t,"Please enter a valid email address!"):t.attributes.required&&"tel"==t.type&&(validatePhone(t)||d(t,"Please enter a valid phone number!")))}return e}(r)?(r.querySelector(".form-messages").classList.remove("error"),r.querySelector(".form-messages").classList.add("success"),r.querySelector(".form-messages").textContent="",!0):(r.querySelector(".form-messages").classList.remove("success"),r.querySelector(".form-messages").classList.add("error"),r.querySelector(".form-messages").textContent="Please ensure all required fields have been completed!",!1)}(a))if(o=!0,""==a.getAttribute("data-ajax")){var i=new FormData(a);r.open("POST",a.getAttribute("action")),r.send(i)}else a.submit();else a.querySelector('[type="submit"]').textContent="Submit Review"}))})),function(){if(typeof(_kkraswiper)=="undefined")return!0;var e=document.querySelectorAll(".kkra-global--slider .swiper-container"),t=[];e.length&&e.forEach((function(e,r){t[r]=new Swiper(e,{slidesPerView:1,loop:!0,spaceBetween:20,breakpoints:{768:{slidesPerView:2},992:{slidesPerView:3}},pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}))}(),p()})),r.onreadystatechange=function(){r.readyState===r.DONE&&(o=!1,200===r.status?(console.log(r.response),function(e){if(e&&e.id){var t=e.id,r=document.querySelector("#modal-thankyou-"+t),a=document.querySelector("#modal-"+t),n=document.querySelector("#"+t+' [type="submit"]'),i=document.querySelector("#kkra-form-"+t+' [name="kkra_redirect"]');r&&(r.classList.add("active"),a&&a.classList.remove("active")),n&&(n.textContent="Submitted Successfully!"),i&&i.value&&(window.location.href=redirecturl)}}(JSON.parse(r.response))):document.querySelector(".form-messages").textContent="Error Submitting Form, Please Try Again")},a.onreadystatechange=function(){var e,t,r;a.readyState===a.DONE&&200===a.status&&(e=JSON.parse(a.response),t=document.querySelector(".kkra-global"),r=document.querySelector(".kkra-filters"),e.html&&(t.innerHTML=e.html,t.classList.remove("paginating"),0==e.total_post&&(t.innerHTML='<p class="none-found">No Reviews Found!</p>'),document.querySelectorAll("[data-pageterm]").forEach((function(e,t){var r=e.querySelectorAll("a"),a=e.getAttribute("data-pageterm"),i=e.getAttribute("data-perpage");e.parentNode,n[a]=1,r.length&&r.forEach((function(e,t){e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var t=this.getAttribute("href");s(t=t.replace("#",""),a,i),n[a]=t}))}))})),l(r||t),f(t),p()))},"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var r=0;r<this.length;r++)e.call(t,this[r],r,this)})}();